From 2926358dc4592f2770bf9868670ddca4cef77d7b Mon Sep 17 00:00:00 2001
From: Frankie Dintino <fdintino@gmail.com>
Date: Thu, 28 Jan 2021 11:18:15 -0500
Subject: [PATCH] Fixes for building on manylinux1

---
 aom_dsp/x86/intrapred_avx2.c | 4 ++++
 build/cmake/version.pl       | 1 -
 2 files changed, 4 insertions(+), 1 deletion(-)

diff --git a/aom_dsp/x86/intrapred_avx2.c b/aom_dsp/x86/intrapred_avx2.c
index 546ee74..c9c9285 100644
--- a/aom_dsp/x86/intrapred_avx2.c
+++ b/aom_dsp/x86/intrapred_avx2.c
@@ -15,6 +15,10 @@
 #include "aom_dsp/x86/intrapred_x86.h"
 #include "aom_dsp/x86/lpf_common_sse2.h"
 
+#if __GNUC__ < 6
+  #define _mm256_bsrli_epi128(a, count) _mm256_srli_si256((a), (count))
+#endif
+
 static INLINE __m256i dc_sum_64(const uint8_t *ref) {
   const __m256i x0 = _mm256_loadu_si256((const __m256i *)ref);
   const __m256i x1 = _mm256_loadu_si256((const __m256i *)(ref + 32));
diff --git a/build/cmake/version.pl b/build/cmake/version.pl
index 7d23f2b..73c5f81 100755
--- a/build/cmake/version.pl
+++ b/build/cmake/version.pl
@@ -11,7 +11,6 @@
 ##
 use strict;
 use warnings;
-use 5.010;
 use Getopt::Long;
 
 my $git_desc = '';
-- 
2.30.0

